{% extends "base.html" %}

{% block lab %}Лабораторная работа 3{% endblock %}

{% block main %}
    <h1>Книги</h1>
    
    <form>
        <div style="margin-bottom: 20px;">
            <div>
                <label for="min_price">Минимальная цена:</label><br>
                <input type="text" id="min_price" name="min_price" value="{{ min_price or '' }}" placeholder="320" style="width: 200px;">
            </div>
            
            <div>
                <label for="max_price">Максимальная цена:</label><br>
                <input type="text" id="max_price" name="max_price" value="{{ max_price or '' }}" placeholder="920" style="width: 200px;">
            </div>
        </div>
        <div>
            <button type="submit" name="search" value="1" style="padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">Искать</button>
            <a href="/lab3/del_book_search" style="padding: 8px 16px; background-color: #f44336; color: white; text-decoration: none; border-radius: 4px; margin-left: 10px;">Сброс</a>
        </div>
    </form>

    {% if products_count is defined %}
        <div style="margin: 20px 0;">
            <strong>Найдено книг: {{ products_count }} из {{ all_products_count }}</strong>
        </div>
    {% endif %}

    {% if products and products_count > 0 %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
            {% for book in products %}
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px; background-color: #f9f9f9;">
                <h3 style="margin-top: 0; color: #333;">{{ book.name }}</h3>
                <div style="font-size: 20px; font-weight: bold; color: #2E8B57; margin: 10px 0;">
                    {{ book.price }} руб.
                </div>
                <div style="color: #666;">
                    <strong>Автор:</strong> {{ book.author }}<br>
                    <strong>Жанр:</strong> {{ book.genre }}<br>
                    <strong>Год:</strong> {{ book.year }}
                </div>
            </div>
            {% endfor %}
        </div>
    {% elif products_count == 0 %}
        <div style="color: #666; font-style: italic; text-align: center; margin: 40px 0;">
            Не найдено ни одной книги по заданным критериям
        </div>
    {% endif %}
{% endblock %}